{%- assign sectionTitle = 'register.title' | t -%}
{%- assign sectionTitleTag = 'h2' -%}

{%- capture sectionContent -%}

    {% form 'create_customer', id: 'register-form' %}

        {% if settings.registerCompanyInformation %}

            <div class="form-group form-floating">

                <input type="text" class="form-control" name="company" id="register-company" value="{{ form.submitted.company }}" placeholder="{{ 'account.information.company' | t }}">

                <label for="register-company">
                    {{ 'account.information.company' | t }}
                </label>

            </div>

            <div class="row">

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <input type="text" class="form-control" name="company_id" id="register-company-id" value="{{ form.submitted.company_id }}" placeholder="{{ 'account.information.company_id' | t }}">

                        <label for="register-company-id">
                            {{ 'account.information.company_id' | t }}
                        </label>

                    </div>

                </div>

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <input type="text" class="form-control" name="vat_number" id="register-vat-number" value="{{ form.submitted.vat_number }}" placeholder="{{ 'account.information.vat_number' | t }}">

                        <label for="register-vat-number">
                            {{ 'account.information.vat_number' | t }}
                        </label>

                    </div>

                </div>

            </div>

        {% endif %}

        {% if settings.registerAdditionalInformation %}

            <div class="row">

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                         <input type="text" class="form-control" name="first_name" id="register-firstname" placeholder="{{ 'account.information.firstname' | t }}" value="{{ form.submitted.first_name | escape }}" required>

                         <label for="register-firstname">
                            {{ 'account.information.firstname' | t }}
                        </label>

                    </div>

                </div>

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <input type="text" class="form-control" name="last_name" id="register-lastname" placeholder="{{ 'account.information.firstname' | t }}" value="{{ form.submitted.last_name | escape }}" required>

                        <label for="register-lastname">
                            {{ 'account.information.lastname' | t }}
                        </label>

                    </div>

                </div>

            </div>

            <div class="row">

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <input type="email" class="form-control" name="email" id="register-email" placeholder="{{ 'account.information.email' | t }}" value="{{ form.submitted.email | escape }}" required>

                        <label for="register-email">
                            {{ 'account.information.email' | t }}
                        </label>

                    </div>

                </div>

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <input type="tel" class="form-control" name="phonenumber" id="register-phone" placeholder="{{ 'account.information.phone' | t }}" value="{{ form.submitted.phonenumber | escape }}" required>

                        <label for="register-phone">
                            {{ 'account.information.phone' | t }}
                        </label>

                    </div>

                </div>

            </div>

            <div class="form-group form-floating">

                <input type="text" class="form-control" name="address_1" id="register-address-1" placeholder="{{ 'account.information.street_address' | t }}" value="{{ form.submitted.address_1 }}">

                <label for="register-address-1">
                    {{ 'account.information.street_address' | t }}
                </label>

            </div>

            <div class="row">

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <select name="country" class="form-select" id="register-country">

                            {{ country_option_tags }}

                        </select>

                        <label for="register-country">
                            {{ 'account.information.country' | t }}
                        </label>

                    </div>

                </div>

                <div class="form-group col-12 col-md">

                    <div class="form-floating">

                        <input type="text" class="form-control" name="zipcode" id="register-zipcode" placeholder="{{ 'account.information.zipcode' | t }}" value="{{ form.submitted.zipcode }}">

                        <label for="register-zipcode">
                            {{ 'account.information.zipcode' | t }}
                        </label>

                    </div>

                </div>

                <div class="form-group col-12 col-md-6">

                    <div class="form-floating">

                        <input type="text" class="form-control" name="city" id="register-city" placeholder="{{ 'account.information.city' | t }}" value="{{ form.submitted.city }}">

                        <label for="register-city">
                            {{ 'account.information.city' | t }}
                        </label>

                    </div>

                </div>

            </div>

            <div class="form-group form-floating">

                <input type="password" pattern=".{8,}" class="form-control" name="password" id="register-password" placeholder="{{ 'account.information.password' | t }}" value="{{ form.submitted.password | escape }}" required title="8 {{ 'error.min_length' | t }}">

                <label for="register-password">
                    {{ 'account.information.password' | t }}
                </label>

            </div>

        {% else %}

            <div class="form-group form-floating">

                 <input type="text" class="form-control" name="first_name" id="register-firstname" placeholder="{{ 'account.information.firstname' | t }}" value="{{ form.submitted.first_name | escape }}" required>

                 <label for="register-firstname">
                    {{ 'account.information.firstname' | t }}
                </label>

            </div>

            <div class="form-group form-floating">

                <input type="text" class="form-control" name="last_name" id="register-lastname" placeholder="{{ 'account.information.firstname' | t }}" value="{{ form.submitted.last_name | escape }}" required>

                <label for="register-lastname">
                    {{ 'account.information.lastname' | t }}
                </label>

            </div>

            <div class="form-group form-floating">

                <input type="email" class="form-control" name="email" id="register-email" placeholder="{{ 'account.information.email' | t }}" value="{{ form.submitted.email | escape }}" required>

                <label for="register-email">
                    {{ 'account.information.email' | t }}
                </label>

            </div>

            <div class="form-group form-floating">

                <input type="password" pattern=".{8,}" class="form-control" name="password" id="register-password" placeholder="{{ 'account.information.password' | t }}" value="{{ form.submitted.password | escape }}" required title="8 {{ 'error.min_length' | t }}">

                <label for="register-password">
                    {{ 'account.information.password' | t }}
                </label>

            </div>

        {% endif %}

        {% if settings.policyAgreementMethod == 'check' %}

            {% if store.terms_and_conditions %}

                <div class="form-group form-check">

                    <input type="checkbox" name="terms_and_conditions" id="register-terms-conditions" class="form-check-input">

                    <label for="register-terms-conditions" class="form-check-label">

                        {% assign policyName = 'general.policies.terms_and_conditions' | t %}
                        {% assign link = policyName | link_to: store.terms_and_conditions.url, null, '_blank' %}

                        {{- 'general.policy_accept_text' | t, policy: link -}}

                    </label>

                </div>

            {% endif %}

            {% if store.privacy_policy %}

                <div class="form-group form-check">

                    <input type="checkbox" name="privacy_policy" id="register-privacy-policy" class="form-check-input">

                    <label for="register-privacy-policy" class="form-check-label">

                        {% assign policyName = 'general.policies.privacy_policy' | t  %}
                        {% assign link = policyName | link_to: store.privacy_policy.url, null, '_blank' %}

                        {{- 'general.policy_accept_text' | t, policy: link -}}

                    </label>

                </div>

            {% endif %}

        {% endif %}

        {% render 'form-error', error: form.error, class: 'form-group' %}

        <button type="submit" id="register-cta" class="btn btn-section btn-block mb-4"{% if settings.policyAgreementMethod == 'check' %} disabled{% endif %}>
            {{ 'register.cta' | t }}
        </button>

        {% if settings.policyAgreementMethod == 'inline' and store.terms_and_conditions %}

            <p class="small text-muted">

                {% assign actionText = 'register.cta' | t %}
                {% assign termsName = 'general.policies.terms_and_conditions' | t  %}
                {% assign termsLink = termsName | link_to: store.terms_and_conditions.url, null, '_blank' %}

                {% if store.privacy_policy %}

                    {% assign policyName = 'general.policies.privacy_policy' | t  %}
                    {% assign policyLink = policyName | link_to: store.privacy_policy.url, null, '_blank' %}

                    {{- 'register.inline_terms_with_policy' | t, action: actionText, terms: termsLink, policy: policyLink -}}

                {% else %}

                   {{- 'register.inline_terms' | t, action: actionText, terms: termsLink -}}

                {% endif %}

            </p>

        {% endif %}

        <hr class="mt-5 mb-5">

        <h3 class="mb-5">
            {{ 'register.returning_customer' | t }}
        </h3>

        <a href="{{ routes.account_login_url }}" class="btn btn-outline-section btn-block">
            {{ 'register.login' | t }}
        </a>

    {% endform %}

{%- endcapture -%}

<section class="section section-register">
    {% render 'section', sectionTitle: sectionTitle, sectionTitleTag: sectionTitleTag, sectionContent: sectionContent, sectionContentContainer: 'tiny', sectionOverlay: true %}
</section>